<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>Khurram Aziz - Johnny-Five</title>

  <link rel="canonical" href='/posts/johnny-five'>

      <link type="application/rss+xml" rel="alternate" title="Khurram Aziz" href="/feed.rss" />
      <link type="application/atom+xml" rel="alternate" title="Khurram Aziz" href="/feed.atom" />

  <meta name="application-name" content='Khurram Aziz' />
  <meta name="msapplication-tooltip" content='Khurram Aziz' />
  <meta name="msapplication-starturl" content='/' />

  <meta property="og:title" content='Khurram Aziz - Johnny-Five' />
  <meta property="og:type" content="website" />
  <meta property="og:url" content='/posts/johnny-five' />

  <link rel="icon" href='/favicon.ico'>

  <!-- Custom fonts for this template -->
  <link href='/vendor/fontawesome-free/css/all.min.css' rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" data-no-mirror>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" data-no-mirror>

  <!-- Styles for this template (also includes Bootstrap) -->
  <link href='/scss/clean-blog.css' rel="stylesheet">

  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js" data-no-mirror></script>
  <script src="https://cdn.jsdelivr.net/npm/quicklink@2.3.0/dist/quicklink.umd.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism.css" rel="stylesheet">

  


  

</head>

<body>

  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href='/'>Khurram Aziz</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      Menu
      <i class="fas fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ms-auto">
          <li class="nav-item">
    <a class="nav-link" href="/pages/about">About</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/pages/series">Series</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/posts">Posts</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tags">Tags</a>
  </li>

      </ul>
    </div>
  </div>
</nav>


  <!-- Page Header -->
  <header class="masthead no-image">
  <div class="container position-relative">
    <div class="row">
      <div class="col-md-12">
        <div class='post-heading'>
          <h1>
            Johnny-Five
          </h1>
            <div class="meta">Published on Friday, February 3, 2017</div>
              <div class="mt-3">
                  <a href="/tags/esp8266" class="badge text-bg-light"> ESP8266</a>
                  <a href="/tags/iot" class="badge text-bg-light"> IoT</a>
                  <a href="/tags/linux" class="badge text-bg-light"> Linux</a>
                  <a href="/tags/node" class="badge text-bg-light"> Node</a>
                  <a href="/tags/raspberry-pi" class="badge text-bg-light"> Raspberry Pi</a>
                  <a href="/tags/windows" class="badge text-bg-light"> Windows</a>
              </div>
        </div>
      </div>
    </div>
  </div>
</header>


  <!-- Main Content -->
  <div class="container">
    <div class="row">
      <div id="content" class="col-md-12">
        <p><b>ESP8266 Series</b></p>
<ul>
  <li><a title="Blink" href="/posts/blink.html">Blink</a></li>
  <li><a title="Arduino core for ESP8266 WiFi chip" href="/posts/arduino-core-esp8266.html">Arduino core for ESP8266 WiFi chip</a></li>
  <li><a title="Sonoff Dissection" href="/posts/sonoff-dissection.html">Sonoff Dissection</a></li>
  <li><a title="MQ Telemetry Transport" href="/posts/mqtt.html">MQ Telemetry Transport</a></li>
  <li><a title="Firmata" href="/posts/firmata.html">Firmata</a></li>
  <li><a title="Johnny-Five" href="/posts/johnny-five.html">Johnny-Five</a></li>
</ul>
<p>In <a title="Firmata" href="/posts/firmata.html" target="_blank">Firmata</a> post we established that we can have Python or Node.js application running on a computer; that can be a Single Board Computer like <a href="http://weblogs.com.pk/khurram/archive/tags/Raspberry+Pi/default.aspx" target="_blank">Raspberry Pi</a> running Rasbian or <a title="Blink with Windows 10 IoT" href="/posts/blink-win10.html">Windows 10 IoT</a> and can control and get sensor data from the Microcontrollers like Arduino or ESP8266</p>  <p><img width="946" height="478" title="j5-firmata" style="border-left-width:0px;border-right-width:0px;background-image:none;border-bottom-width:0px;padding-top:0px;padding-left:0px;margin:10px 10px 0px 0px;display:inline;padding-right:0px;border-top-width:0px;" alt="j5-firmata" src=/images/868d27172a4b_EB26/j5-firmata.jpg" border="0"></p>  <ul>   <li>Check out <a href="https://github.com/ms-iot/python" target="_blank">https://github.com/ms-iot/python</a> for how you can develop Python applications for Windows IoT </li> </ul>  <p>There exists many IoT frameworks for Javascript / Node.js that allows us to write our programs and <a href="http://johnny-five.io/" target="_blank">Johnny-Five</a> is one such popular framework. Using such framework we not only have access to many Javascript / Node.js libraries but also get a platform on which we can write our program quickly in more friendlier environment. Johnny-Five supports Arduino as well as many other boards through the IO Plugin; that is Firmata compatible interface; to communicate with non Arduino hardware. Johnny Five can be used on richer boards like Raspberry Pi and Galileo as well as with Microcontrollers through IO Plugins. It also includes DSL libraries for working with many different actuators and sensors that enable writing IoT code more fun.</p>  <p>Johnny Five needs Node.js v4.2.1 (at the time of this writing); and on Raspberry Pi you can get more recent version using NodeSource</p>  <blockquote>   <p><font face="Courier New">curl -sL https://deb.nodesource.com/setup_7.x | sudo -E bash -        <br>sudo apt install nodejs</font></p> </blockquote>  <p>And then use npm install johnny-five to get the bits. For ESP8266; we will create firmata object similar to the <a title="Firmata" href="/posts/firmata.html" target="_blank">Firmata</a> post and then on its ready event; hand it over as io to johnny five. We can then continue from there and subscribe to its ready event and write the program. The Blink code will be something like this:</p> <script src="//gist-it.appspot.com/github/khurram-aziz/HelloArduino/blob/master/firmata-j5.js"></script>  <ul>   <li>Note how Johnny Framework is providing DSL library for LED; we can blink, toggle, strobe and fade it using the provided library; visit <a title="https://github.com/rwaldron/johnny-five/wiki/Led" href="https://github.com/rwaldron/johnny-five/wiki/Led" target="_blank">https://github.com/rwaldron/johnny-five/wiki/Led</a> for more details </li> </ul>  <p>There are also DSL libraries for other sensors and actuators; for instance we can use Thermometer library for temperature sensor; <a title="https://github.com/rwaldron/johnny-five/wiki/Thermometer" href="https://github.com/rwaldron/johnny-five/wiki/Thermometer" target="_blank">https://github.com/rwaldron/johnny-five/wiki/Thermometer</a> has more details</p> <script src="//gist-it.appspot.com/github/khurram-aziz/HelloArduino/blob/master/firmata-j5-temperature.js"></script>  <ul>   <li>Note that we are using ESP8266 that is 3.3V powered and we are not using the built in controller and instead giving our own temperature calculation lambda </li> </ul>  <p><img width="471" height="322" title="j5-thingspeak" style="border-top:0px;border-right:0px;background-image:none;border-bottom:0px;padding-top:0px;padding-left:0px;border-left:0px;margin:10px 10px 0px 0px;display:inline;padding-right:0px;" alt="j5-thingspeak" src=/images/868d27172a4b_EB26/j5-thingspeak.jpg" border="0"></p>  <ul>   <li>3.3V of ESP8266 is noisy; we can get better result&nbsp;by using&nbsp;some digital sensor</li>    <li>ESP01; the widely used ESP8266 board sadly doesnt expose its Analog pin; and we have to use digital sensor</li> </ul>  <p>We can use Johnny Five on Windows 10 IoT as well, in fact Node.js Tools for Visual Studio UWP Extension support Johny-Five and Cylon by providing Project Templates. For details on Node.js Tools for Visual Studio UWP Extension; check out <a href="/posts/blink-win10.html" target="_blank">Blink with Windows 10 IoT</a> post</p>  <p><img width="953" height="618" title="j5-ntvs-uwp" style="border-left-width:0px;border-right-width:0px;background-image:none;border-bottom-width:0px;padding-top:0px;padding-left:0px;margin:10px 10px 0px 0px;display:inline;padding-right:0px;border-top-width:0px;" alt="j5-ntvs-uwp" src=/images/868d27172a4b_EB26/j5-ntvs-uwp.jpg" border="0"></p>  <p>For development in Visual Studio and deployment on Windows IoT; we need to watch out for certain gotchas. After NPM package restore; we need to update them; this will apply Windows IoT specific patches to the node modules. Another important thing to watch out is MAX_PATH issue; when building the nodule modules are zipped up and make part of the package; and in doing this; it can face this issue; use npm dedupe to flatten the node modules; and we might have to go deep and dedupe inner modules as well; depending on the errors it generate. For instance I faced issues in node modules under firmata; I simply navigated there and dedupe it and then dedupe in root again. We have to restart the Visual Studio so it picks up the changed things. At the Windows 10 IoT side; we also need to enable Long Paths by issue-ing <b>reg add "HKLM\SYSTEM\CurrentControlSet\Control\FileSystem" /t REG_DWORD /d 1 /v LongPathsEnabled /f</b> at Device Portal and then restart the device to pick the things.</p>  <ul>   <li>The above workarounds are well documented at <a title="https://github.com/ms-iot/ntvsiot" href="https://github.com/ms-iot/ntvsiot">https://github.com/ms-iot/ntvsiot</a> </li> </ul>  <p><img width="965" height="629" title="j5-uwp-notes" style="border-left-width:0px;border-right-width:0px;background-image:none;border-bottom-width:0px;padding-top:0px;padding-left:0px;margin:10px 10px 0px 0px;display:inline;padding-right:0px;border-top-width:0px;" alt="j5-uwp-notes" src=/images/868d27172a4b_EB26/j5-uwp-notes.jpg" border="0"></p>  <p>You can optionally specify â€“use-logger debug option and it will store the console output in the log file that you can then review</p>  <p><img width="1147" height="481" title="j5-windows10io-log" style="border-left-width:0px;border-right-width:0px;background-image:none;border-bottom-width:0px;padding-top:0px;padding-left:0px;margin:10px 10px 0px 0px;display:inline;padding-right:0px;border-top-width:0px;" alt="j5-windows10io-log" src=/images/868d27172a4b_EB26/j5-windows10io-log.jpg" border="0"></p>


        

      </div>
    </div>
  </div>

  <hr>

  <!-- Footer -->
  <footer>
  <div class="container">
    <div class="row">
      <div class="col-md-12 text-center">
        <p class="copyright">Copyright &#xA9; 2024</p>

        <ul class="list-inline text-center small">
            <li class="list-inline-item">
              <a href="/feed.rss"><i class="fa fa-rss"></i> RSS Feed</a>
            </li>
            <li class="list-inline-item">
              <a href="/feed.atom"><i class="fa fa-rss"></i> Atom Feed</a>
            </li>
        </ul>
        <br />
        <div class="font-weight-bold small"><a href="https://statiq.dev">Generated by Statiq</a></div>
      </div>
    </div>
  </div>
</footer>


  <!-- Scripts -->
  <script src='/vendor/bootstrap/js/bootstrap.bundle.min.js'></script>
  <script src='/vendor/startbootstrap-clean-blog/js/scripts.js'></script>
  <script src='/js/clean-blog.js'></script>
  

  

</body>

</html>
