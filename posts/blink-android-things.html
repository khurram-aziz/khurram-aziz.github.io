<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>Khurram Aziz - Blink with Android Things</title>

  <link rel="canonical" href='/posts/blink-android-things'>

      <link type="application/rss+xml" rel="alternate" title="Khurram Aziz" href="/feed.rss" />
      <link type="application/atom+xml" rel="alternate" title="Khurram Aziz" href="/feed.atom" />

  <meta name="application-name" content='Khurram Aziz' />
  <meta name="msapplication-tooltip" content='Khurram Aziz' />
  <meta name="msapplication-starturl" content='/' />

  <meta property="og:title" content='Khurram Aziz - Blink with Android Things' />
  <meta property="og:type" content="website" />
  <meta property="og:url" content='/posts/blink-android-things' />

  <link rel="icon" href='/favicon.ico'>

  <!-- Custom fonts for this template -->
  <link href='/vendor/fontawesome-free/css/all.min.css' rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" data-no-mirror>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" data-no-mirror>

  <!-- Styles for this template (also includes Bootstrap) -->
  <link href='/scss/clean-blog.css' rel="stylesheet">

  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js" data-no-mirror></script>
  <script src="https://cdn.jsdelivr.net/npm/quicklink@2.3.0/dist/quicklink.umd.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism.css" rel="stylesheet">

  


  

</head>

<body>

  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href='/'>Khurram Aziz</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      Menu
      <i class="fas fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ms-auto">
          <li class="nav-item">
    <a class="nav-link" href="/pages/about">About</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/pages/series">Series</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/posts">Posts</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tags">Tags</a>
  </li>

      </ul>
    </div>
  </div>
</nav>


  <!-- Page Header -->
  <header class="masthead no-image">
  <div class="container position-relative">
    <div class="row">
      <div class="col-md-12">
        <div class='post-heading'>
          <h1>
            Blink with Android Things
          </h1>
            <div class="meta">Published on Friday, January 27, 2017</div>
              <div class="mt-3">
                  <a href="/tags/android" class="badge text-bg-light"> Android</a>
                  <a href="/tags/iot" class="badge text-bg-light"> IoT</a>
                  <a href="/tags/raspberry-pi" class="badge text-bg-light"> Raspberry Pi</a>
              </div>
        </div>
      </div>
    </div>
  </div>
</header>


  <!-- Main Content -->
  <div class="container">
    <div class="row">
      <div id="content" class="col-md-12">
          <p><b><a href="/images/Blink-with-Android-Things_E8A6/android-things.gif"><img width="600" height="338" title="android-things" align="right" style="float:right;margin:10px 10px 0px 0px;display:inline;" alt="android-things" src="/images/Blink-with-Android-Things_E8A6/android-things_thumb.gif"></a>Blink Series</b></p>      <ul>     <li><a title="Blink" href="/posts/blink.html">Blink</a> </li>        <li><a title="Blink with Windows 10 IoT" href="/posts/blink-win10.html">Blink with Windows 10 IoT</a> </li>        <li><a href="/posts/blink-android-things.html">Blink with Android Things</a> </li>   </ul>      <p>Android Things is Google’s OS offering for IoT scene. It leverages Android’ development tools and APIs and add new APIs to provide low level I/O and also offer libraries for common components like temperature sensors and display controllers etc. You can get the Developer Preview from <a title="https://developer.android.com/things/index.html" href="https://developer.android.com/things/index.html">https://developer.android.com/things/index.html</a>, Raspberry PI 3 along with few other boards are supported. For PI3; there is an image that we burn to SD card; very similar to Rasbian and boot the PI connecting it to the Ethernet. We can identify the IP of the device either using DHCP Server or Wifi Router with Ethernet ports. Alternately; it has <a title="https://en.wikipedia.org/wiki/Multicast_DNS" href="https://en.wikipedia.org/wiki/Multicast_DNS">https://en.wikipedia.org/wiki/Multicast_DNS</a> support that has become very popular in IoT devices; and Android Things board will publish itself as android.local on the subnet. Unfortunately Windows 10 “yet” doesn't support it “completely”; but we can install Apple’s Bonjour Service (it comes with iTunes; or install Bonjour Print Services) and can discover the IP of the device.</p>      <p><img width="493" height="448" title="bonjour-service" style="border-left-width:0px;border-right-width:0px;background-image:none;border-bottom-width:0px;padding-top:0px;padding-left:0px;margin:10px 10px 0px 0px;display:inline;padding-right:0px;border-top-width:0px;" alt="bonjour-service" src="/images/Blink-with-Android-Things_E8A6/bonjour-service.jpg" border="0"></p>      <ul>     <li><a title="https://developer.android.com/things/hardware/raspberrypi.html" href="https://developer.android.com/things/hardware/raspberrypi.html" target="_blank">https://developer.android.com/things/hardware/raspberrypi.html</a> has additional information how we can start the WifiSetupService activity and it will connect to specified Wifi network and then we can disconnect the Ethernet </li>   </ul>      <p>For the development; we will need Android Studio 2.2+. The SDK Tools should be 24 or higher in the Android SDK Manager. We will also need Android 7.0 (API 24) or higher. Create a project in Android Studio targeting Android 7.0 or above; and then add com.google.android.things:androidthings:0.1-devpreview dependency in module level build.gradle file</p>      <p><img width="1072" height="427" title="hellothings-gradle" style="border-left-width:0px;border-right-width:0px;background-image:none;border-bottom-width:0px;padding-top:0px;padding-left:0px;margin:10px 10px 0px 0px;display:inline;padding-right:0px;border-top-width:0px;" alt="hellothings-gradle" src="/images/Blink-with-Android-Things_E8A6/hellothings-gradle.png" border="0"></p>      <p>We also need to specify IOT_LAUNCHER category for intent-filter in the manifest file to declare our activity as the main entry point after the device boots    <br></p>      <p><img width="951" height="490" title="hellothings-manifest" style="border-left-width:0px;border-right-width:0px;background-image:none;border-bottom-width:0px;padding-top:0px;padding-left:0px;margin:10px 10px 0px 0px;display:inline;padding-right:0px;border-top-width:0px;" alt="hellothings-manifest" src="/images/Blink-with-Android-Things_E8A6/hellothings-manifest.png" border="0"></p>      <p>For our Blink; we will use Handler and Runnable for scheduling and blink logic along with PeripheralManagerService to access the GPIO pins. The code for our activity would be something like this</p>      <blockquote>     <pre>package pk.com.weblogs.khurram.hellothings;<br><br>import android.os.Handler;<br>import android.support.v7.app.AppCompatActivity;<br>import android.os.Bundle;<br>import android.util.Log;<br><br>import com.google.android.things.pio.Gpio;<br>import com.google.android.things.pio.PeripheralManagerService;<br><br>import java.io.IOException;<br><br>public class MainActivity extends AppCompatActivity {<br>    String TAG = "HelloThings";<br>    Handler handler = new Handler();<br>    Runnable blink = null;<br>    Gpio led = null;<br><br>    &#64;Override<br>    protected void onDestroy() {<br>        super.onDestroy();<br>        if (null!=blink)<br>            this.handler.removeCallbacks(this.blink);<br>        if (null!=led)<br>            try {<br>                led.close();<br>            }<br>            catch (IOException e) {<br>                Log.e(TAG, "Failed to close the LED", e);<br>            }<br>    }<br><br>    &#64;Override<br>    protected void onCreate(Bundle savedInstanceState) {<br>        super.onCreate(savedInstanceState);<br>        setContentView(R.layout.activity_main);<br>        PeripheralManagerService service = new PeripheralManagerService();<br>        //Log.d(TAG, "Available GPIO: " + service.getGpioList());<br>        //BCM17<br>        try {<br>            this.led = service.openGpio("BCM17");<br>            if (null == led) return;<br>            this.led.setDirection(Gpio.DIRECTION_OUT_INITIALLY_LOW);<br>            this.blink = new Runnable() {<br>                &#64;Override<br>                public void run() {<br>                    try {<br>                        led.setValue(!led.getValue());<br>                        handler.postDelayed(this, 1000);<br>                    } catch (IOException e) {<br>                        Log.e(TAG, "Failed to set value on GPIO", e);<br>                    }<br>                }<br>            };<br>            handler.post(this.blink);<br>        } catch (IOException e) {<br>            Log.e(TAG, "Failed to open BCM17", e);<br>        }<br>    }<br>}</pre>  </blockquote>    <p>We can run/debug our application from Android Studio; given the Android Debug Bridge is connected to the device</p>    <p><img width="1017" height="649" title="hellothings-adb" style="border-left-width:0px;border-right-width:0px;background-image:none;border-bottom-width:0px;padding-top:0px;padding-left:0px;margin:10px 10px 0px 0px;display:inline;padding-right:0px;border-top-width:0px;" alt="hellothings-adb" src="/images/Blink-with-Android-Things_E8A6/hellothings-adb.png" border="0"></p>    <ul>     <li>LED’s Positive/Anode side is connected to BCM GPIO 17 (GPIO0) / Header Pin 11 and its Negative/Cathode side is connected to Header Pin 6 (OV) similar to <a title="/posts/blink.html" href="/posts/blink.html" target="_blank">/posts/blink.html</a> (Raspberry Pi Pin Layout is given on this previous post)&nbsp;</li>  </ul>    <p>Similar to Windows 10 IoT; we can have graphical interface and when the application runs; it gets displayed over the HDMI on the Raspberry PI and we can connect USB mouse/keyboard and interact with the application.</p>    <h1>Android Things Resources</h1>    <ul>      <li><a title="https://developer.android.com/things/training/first-device/index.html" href="https://developer.android.com/things/training/first-device/index.html" target="_blank">https://developer.android.com/things/training/first-device/index.html</a> is a complete walkthrough for the creating and running the first project; in case you get stuck some place </li>        <li><a title="https://developer.android.com/things/sdk/samples.html" href="https://developer.android.com/things/sdk/samples.html" target="_blank">https://developer.android.com/things/sdk/samples.html</a> </li>  </ul>    <h1>Android Things Review</h1>    <p>Its still a developer preview and its not fair to give any final verdict; however it feels and smells a lot like Windows 10 IoT with Windows 10 IoT a bit more mature and attractive due to its Node.js support etc. Given Raspberry PI is capable of doing a lot; Rasbian / PIXEL has shown this; and I think Raspberry PI like Single Board Computers deserves better Windows 10 IoT and Android Things; may be Windows 10 Core with proper Shell / Store / Apps as free version and Windows 2016 Server Core as commercial version and Android Lite / Core as a complete Android TV like experience minus phone features. Cortana and Google Now makes a lot of sense here as well. The problem with these both Windows 10 IoT and Android Things platforms is; if you want to design a home automation or some similar solution and want to keep things cloud free; you will need a separate Raspberry PI running Rasbian or a PC for things like MQTT or database / web interface etc. However these both OSes have solid User Interface frameworks and can be used as GUI “Consoles” for&nbsp;our IoT&nbsp;solutions</p>


        

      </div>
    </div>
  </div>

  <hr>

  <!-- Footer -->
  <footer>
  <div class="container">
    <div class="row">
      <div class="col-md-12 text-center">
        <p class="copyright">Copyright &#xA9; 2024</p>

        <ul class="list-inline text-center small">
            <li class="list-inline-item">
              <a href="/feed.rss"><i class="fa fa-rss"></i> RSS Feed</a>
            </li>
            <li class="list-inline-item">
              <a href="/feed.atom"><i class="fa fa-rss"></i> Atom Feed</a>
            </li>
        </ul>
        <br />
        <div class="font-weight-bold small"><a href="https://statiq.dev">Generated by Statiq</a></div>
      </div>
    </div>
  </div>
</footer>


  <!-- Scripts -->
  <script src='/vendor/bootstrap/js/bootstrap.bundle.min.js'></script>
  <script src='/vendor/startbootstrap-clean-blog/js/scripts.js'></script>
  <script src='/js/clean-blog.js'></script>
  

  

</body>

</html>
