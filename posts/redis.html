<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>Khurram Aziz - Redis</title>

  <link rel="canonical" href='/posts/redis'>

      <link type="application/rss+xml" rel="alternate" title="Khurram Aziz" href="/feed.rss" />
      <link type="application/atom+xml" rel="alternate" title="Khurram Aziz" href="/feed.atom" />

  <meta name="application-name" content='Khurram Aziz' />
  <meta name="msapplication-tooltip" content='Khurram Aziz' />
  <meta name="msapplication-starturl" content='/' />

  <meta property="og:title" content='Khurram Aziz - Redis' />
  <meta property="og:type" content="website" />
  <meta property="og:url" content='/posts/redis' />

  <link rel="icon" href='/favicon.ico'>

  <!-- Custom fonts for this template -->
  <link href='/vendor/fontawesome-free/css/all.min.css' rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" data-no-mirror>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" data-no-mirror>

  <!-- Styles for this template (also includes Bootstrap) -->
  <link href='/scss/clean-blog.css' rel="stylesheet">

  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js" data-no-mirror></script>
  <script src="https://cdn.jsdelivr.net/npm/quicklink@2.3.0/dist/quicklink.umd.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism.css" rel="stylesheet">

  


  

</head>

<body>

  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href='/'>Khurram Aziz</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      Menu
      <i class="fas fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ms-auto">
          <li class="nav-item">
    <a class="nav-link" href="/pages/about">About</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/pages/series">Series</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/posts">Posts</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tags">Tags</a>
  </li>

      </ul>
    </div>
  </div>
</nav>


  <!-- Page Header -->
  <header class="masthead no-image">
  <div class="container position-relative">
    <div class="row">
      <div class="col-md-12">
        <div class='post-heading'>
          <h1>
            Redis
          </h1>
            <div class="meta">Published on Tuesday, March 7, 2017</div>
              <div class="mt-3">
                  <a href="/tags/databases" class="badge text-bg-light"> Databases</a>
                  <a href="/tags/system-administration" class="badge text-bg-light"> System Administration</a>
                  <a href="/tags/windows" class="badge text-bg-light"> Windows</a>
              </div>
        </div>
      </div>
    </div>
  </div>
</header>


  <!-- Main Content -->
  <div class="container">
    <div class="row">
      <div id="content" class="col-md-12">
          <p><b>Redis Series</b></p>    <ul>        <li>This Post</li>        <li><a href="redis-clients.html" target="_blank">Redis Clients</a></li>        <li><a href="redis-clients-asp-net-core.html" target="_blank">Redis Clients -- ASP.NET Core</a></li>  </ul>    <p><img width="240" height="80" title="redis-logo" align="right" style="border-top:0px;border-right:0px;background-image:none;border-bottom:0px;float:right;padding-top:0px;padding-left:0px;border-left:0px;margin:10px 10px 0px 0px;display:inline;padding-right:0px;" alt="redis-logo" src="/images/Redis_CFD3/redis-logo.png" border="0">REmote DIctionary; or Redis is an open source data structure server; its a key-value database and can be used as NoSQL database, cache and message broker.</p>      <p><img width="522" height="795" title="redis-cli" align="left" style="border-top:0px;border-right:0px;background-image:none;border-bottom:0px;float:left;padding-top:0px;padding-left:0px;border-left:0px;margin:10px 10px 0px 0px;display:inline;padding-right:0px;" alt="redis-cli" src="/images/Redis_CFD3/redis-cli.png" border="0">Its distinguishing feature is that we can store data structures such as strings, hashes, lists, sets, sorted sets, bitmaps, hyperloglogs and geospatial indexes. It also offers functions around the data structures for instance range queries for sorted sets, radius queries for geospatial. It has replication support built in and we can have master-slave based tree like Redis cluster. It has Least Recently Used based Eviction / Cache Expiration mechanism along with transaction support. There is also Lua scripting support as well. Redis typically has all the data in the memory but it also persists it on to the disk for durability; it journal its activity so in case of any failure only few seconds of data get lost; it can write data to file in the background using the journal and we can also snapshot the in memory data.</p>      <p>We can get Windows optimized Redis releases from <a title="https://github.com/MSOpenTech/redis/releases" href="https://github.com/MSOpenTech/redis/releases">https://github.com/MSOpenTech/redis/releases</a> that are maintained by <a href="https://msopentech.com">https://msopentech.com</a>; a Microsoft subsidiary; they had <a href="https://msdn.microsoft.com/en-us/library/hh351389(v=azure.10).aspx" target="_blank">AppFabric</a> product that had Redis like <a href="https://msdn.microsoft.com/en-us/library/hh334305(v=azure.10).aspx" target="_blank">Caching</a> component; it seems they dont have any plans to continue it any further given they are now Open source friendly company and instead is offering Windows optimized Redis through GitHub; and its great!</p>      <p>I simply run the installer and it did everything “Windows way” the binaries are in Program Files; and there is also Redis service defined; we can configure it as desired; run it from Administrative command prompt. Similar to ZooKeeper; it comes with redis-cli that we can use to connect to local Redis server. There are plethora of commands that we can play with using the CLI. Some of them are shown in the screenshot.</p>      <ul>     <li><a title="https://redis.io/topics/quickstart" href="https://redis.io/topics/quickstart">https://redis.io/topics/quickstart</a>; for a quick start guide</li>        <li><a title="https://redis.io/commands" href="https://redis.io/commands">https://redis.io/commands</a>; for learning all the CLI commands</li>   </ul>              <p>We can use keys command to query the keys and del to delete them. SET command has nx parameter; if specified; it will only set the key value if its not defined. There is also xx parameter; if specified; it will only set the key value if key already exists. These are useful when multiple clients want to set the same key. SET also has ex and px parameters where we define expiration time of the key in seconds and milliseconds respectively</p>      <ul>     <li>GETSET is an interesting command; it sets the new value and retrieve the old value in the single go; useful for resetting counters!</li>   </ul>      <p><img width="396" height="354" title="redis-keys-set" style="border-top:0px;border-right:0px;background-image:none;border-bottom:0px;padding-top:0px;padding-left:0px;border-left:0px;margin:10px 0px 0px;display:inline;padding-right:0px;" alt="redis-keys-set" src="/images/Redis_CFD3/redis-keys-set.png" border="0">&nbsp; <img width="363" height="413" title="redis-keys-expiration" style="border-top:0px;border-right:0px;background-image:none;border-bottom:0px;padding-top:0px;padding-left:0px;border-left:0px;margin:10px 0px 0px;display:inline;padding-right:0px;" alt="redis-keys-expiration" src="/images/Redis_CFD3/redis-keys-expiration.png" border="0"></p>      <ul>     <li>We can give multiple key names while deleting</li>   </ul>      <p>The keys and values can be maximum of 512Mb in size, keys can be any binary data; string, integer or even file content; but its recommended to use appropriate sized keys with type colon value colon something else; for example user:khurram etc</p>      <p>Using MGET and MSET we can retrieve and set multiple keys; useful for reducing latencies. We can use EXPIRY existing-key seconds to set the cache expiry of existing key; and use TTL key; to know the remaining time for cache expiry.</p>      <p>For the lists; there are LPUSH (Left / Head) and RPUSH; using which we can push multiple values against single key (Lists). We can use LPUSH/RPUSH key val1 val2 … to push multiple values at once. LRANGE is used to retrieve the values and takes start and end index parameters. We can give –1 as parameter for last index, –2 as second last; so to retrieve whole list we will use LRANGE list 0 -1</p>      <ul>     <li>The lists can be used for Producers / Consumer scenarios; RPOP exists especially for Consumers; and when list is empty; it will return null</li>        <li>There is also LPOP but not used in Producer / Consumer; Producer should use LPUSH and Consumer RPOP</li>        <li>BRPOP and LRPOP are Blocking versions of RPOP and LPOP; and instead of polling; consumers can uses BRPOP</li>   </ul>      <p>LTRIM is similar to LRANGE; but it trims the remaining values; we can use it before pushing the data and it will only take the defined elements</p>      <ul>     <li><a title="https://redis.io/topics/data-types-intro" href="https://redis.io/topics/data-types-intro">https://redis.io/topics/data-types-intro</a> is excellent resource to learn about other data types like Hashes, Sets, Sorted sets etc</li>   </ul>      <p>Given Redis is a network server; we should secure our Redis; we should use iptables / firewall so clients from known locations can connect to it; there’s also a security section in the conf file; on Windows; the conf file is passed as parameter to the service binary and its in Program Files\redis; we can open it up and enable authentication</p>    <ul><li>Additionally you can run the service under specific login, giving required permissions to run as service, can listen on network and NTFS permissions. Its always a good idea to run the services (and especially network services) under a login with just enough permissions. Take a look at <a href="http://antirez.com/news/96" target="_new">http://antirez.com/news/96</a> how one can compromise Redis in few seconds</li></ul>      <p><img width="1062" height="824" title="redis-conf" style="border-top:0px;border-right:0px;background-image:none;border-bottom:0px;padding-top:0px;padding-left:0px;border-left:0px;margin:10px 10px 0px 0px;display:inline;padding-right:0px;" alt="redis-conf" src="/images/Redis_CFD3/redis-conf.png" border="0"></p>      <p>Redis will not let read/write data unless client authenticate themselves first</p>      <p><img width="362" height="210" title="redis-auth" style="border-top:0px;border-right:0px;background-image:none;border-bottom:0px;padding-top:0px;padding-left:0px;border-left:0px;margin:10px 10px 0px 0px;display:inline;padding-right:0px;" alt="redis-auth" src="/images/Redis_CFD3/redis-auth.png" border="0"></p>        <p>You can see that similar to <a href="zookeeper.html" target="_blank">ZooKeeper</a>; Redis can be used as foundational service in modern distributed applications. Similar to ZooKeeper; the application workers connect to Redis server over network and there are libraries for many languages; from C/C++ to Java/C#, Perl to Python, ActionScript to NodeJS and Go. In the next post; we will build some client applications</p>      <ul>     <li><a title="https://redis.io/clients" href="https://redis.io/clients">https://redis.io/clients</a> has list of client libraries</li>   </ul>


        

      </div>
    </div>
  </div>

  <hr>

  <!-- Footer -->
  <footer>
  <div class="container">
    <div class="row">
      <div class="col-md-12 text-center">
        <p class="copyright">Copyright &#xA9; 2024</p>

        <ul class="list-inline text-center small">
            <li class="list-inline-item">
              <a href="/feed.rss"><i class="fa fa-rss"></i> RSS Feed</a>
            </li>
            <li class="list-inline-item">
              <a href="/feed.atom"><i class="fa fa-rss"></i> Atom Feed</a>
            </li>
        </ul>
        <br />
        <div class="font-weight-bold small"><a href="https://statiq.dev">Generated by Statiq</a></div>
      </div>
    </div>
  </div>
</footer>


  <!-- Scripts -->
  <script src='/vendor/bootstrap/js/bootstrap.bundle.min.js'></script>
  <script src='/vendor/startbootstrap-clean-blog/js/scripts.js'></script>
  <script src='/js/clean-blog.js'></script>
  

  

</body>

</html>
