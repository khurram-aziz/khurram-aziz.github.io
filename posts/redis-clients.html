<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>Khurram Aziz - Redis Clients</title>

  <link rel="canonical" href='/posts/redis-clients'>

      <link type="application/rss+xml" rel="alternate" title="Khurram Aziz" href="/feed.rss" />
      <link type="application/atom+xml" rel="alternate" title="Khurram Aziz" href="/feed.atom" />

  <meta name="application-name" content='Khurram Aziz' />
  <meta name="msapplication-tooltip" content='Khurram Aziz' />
  <meta name="msapplication-starturl" content='/' />

  <meta property="og:title" content='Khurram Aziz - Redis Clients' />
  <meta property="og:type" content="website" />
  <meta property="og:url" content='/posts/redis-clients' />

  <link rel="icon" href='/favicon.ico'>

  <!-- Custom fonts for this template -->
  <link href='/vendor/fontawesome-free/css/all.min.css' rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" data-no-mirror>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" data-no-mirror>

  <!-- Styles for this template (also includes Bootstrap) -->
  <link href='/scss/clean-blog.css' rel="stylesheet">

  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js" data-no-mirror></script>
  <script src="https://cdn.jsdelivr.net/npm/quicklink@2.3.0/dist/quicklink.umd.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism.css" rel="stylesheet">

  


  

</head>

<body>

  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href='/'>Khurram Aziz</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      Menu
      <i class="fas fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ms-auto">
          <li class="nav-item">
    <a class="nav-link" href="/pages/about">About</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/pages/series">Series</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/posts">Posts</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tags">Tags</a>
  </li>

      </ul>
    </div>
  </div>
</nav>


  <!-- Page Header -->
  <header class="masthead no-image">
  <div class="container position-relative">
    <div class="row">
      <div class="col-md-12">
        <div class='post-heading'>
          <h1>
            Redis Clients
          </h1>
            <div class="meta">Published on Friday, March 10, 2017</div>
              <div class="mt-3">
                  <a href="/tags/net" class="badge text-bg-light"> .NET</a>
                  <a href="/tags/asp.net" class="badge text-bg-light"> ASP.NET</a>
                  <a href="/tags/databases" class="badge text-bg-light"> Databases</a>
                  <a href="/tags/python" class="badge text-bg-light"> Python</a>
                  <a href="/tags/visual-studio" class="badge text-bg-light"> Visual Studio</a>
              </div>
        </div>
      </div>
    </div>
  </div>
</header>


  <!-- Main Content -->
  <div class="container">
    <div class="row">
      <div id="content" class="col-md-12">
        <p><b>Redis Series</b></p>  <ul>      <li><a href="redis.html" target="_blank">Redis</a></li>      <li>This Post</li>      <li><a href="redis-clients-asp-net-core.html" target="_blank">Redis Clients -- ASP.NET Core</a></li>  </ul>    <p>For the Redis clients; imagine we have an e-commerce platform having a Python based component that does some analysis to show which product or campaign / deal to show on the main page; these results are posted / updated into the Redis Server from where the Asp.Net Core application picks them.</p>      <p>For the Python client; we need pip; a PyPa recommeded tool for installing Python packages; on Ubuntu this can be done using the following command</p>      <blockquote>     <p><font face="Courier New">sudo apt-get update &amp;&amp; sudo apt-get install python-dev python-pip</font></p>   </blockquote>      <p>Once pip is available; give this command</p>      <blockquote>     <p><font face="Courier New">sudo pip install redis</font></p>   </blockquote>      <p>Now to connect to Redis Server; we will have a code like this</p>    <script src="//gist-it.appspot.com/github/khurram-aziz/HelloDocker/blob/master/Redis/redis-test.py"></script>      <ul>     <li>You can see that we are simply adding the product ids and offer ids into the cache; the web interface will retrieve the data from the database and render it accordingly. If we want to; the web application can cache the rendered HTML as well and reuse it to save database trips for performance improvement </li>  </ul>      <p>We can install Python on Windows development machine and use Visual Studio Code; there is a nice Python extension available at <a title="https://marketplace.visualstudio.com/items?itemName=donjayamanne.python" href="https://marketplace.visualstudio.com/items?itemName=donjayamanne.python">https://marketplace.visualstudio.com/items?itemName=donjayamanne.python</a> that provides linting, intellisense and what not</p>      <p><img width="638" height="381" title="redisclient-python" style="border-left-width:0px;border-right-width:0px;background-image:none;border-bottom-width:0px;padding-top:0px;padding-left:0px;margin:10px 10px 0px 0px;display:inline;padding-right:0px;border-top-width:0px;" alt="redisclient-python" src="/images/d87747e4e48d_1132D/redisclient-python.png" border="0"></p>      <p>For the .NET Core; we can use <a title="https://www.nuget.org/packages/StackExchange.Redis/" href="https://www.nuget.org/packages/StackExchange.Redis" target="_blank">https://www.nuget.org/packages/StackExchange.Redis</a> Nuget package that’s .NETStandard compatible. This is very famous Redis client library from StackOverFlow guys and its code is available at <a href="https://www.nuget.org/packages/StackExchange.Redis" target="_blank">https://www.nuget.org/packages/StackExchange.Redis</a></p>      <p>If our application is ASP.NET Core; we can instead use <a href="https://www.nuget.org/packages/Microsoft.Extensions.Caching.Redis.Core" target="_blank">https://www.nuget.org/packages/Microsoft.Extensions.Caching.Redis.Core</a> package; which is Distributed cache implementation of Microsoft.Extensons.Caching.Distributed.IDistributedCache using Redis; its an interface for Distributed cache mechanism basked into the ASP.NET Core to improve the performance and scalability of the applications. This package uses Strong Name version of StackExchange.Redis and to add it into the ASP.NET Core application; use <b>dotnet add package Microsoft.Extensions.Caching.Redis.Core</b> command</p>      <ul>     <li>For dotnet add package; you will need the released 1.x SDK; see <a title="dotnet-core.html" href="dotnet-core.html" target="_blank">dotnet-core.html</a> for its background </li>        <li>Visit <a title="https://docs.microsoft.com/en-us/aspnet/core/performance/caching/distributed" href="https://docs.microsoft.com/en-us/aspnet/core/performance/caching/distributed" target="_blank">https://docs.microsoft.com/en-us/aspnet/core/performance/caching/distributed</a> for Working with a distributed cache </li>   </ul>      <p>For our simple proof of concept; given the command <b>dotnet new web</b> in your project folder</p>      <p>It creates a very minimalist Hello World web application; to use the Static Files; give <b>dotnet add package Microsoft.AspNetCore.StaticFiles</b> command. For using Session; give <b>dotnet add package Microsoft.AspNetCore.Session</b>; and finally give <b>dotnet add package Microsoft.Extensions.Caching.Redis.Core</b> command. Restore the packages using dotnet restore and change the Startup.cs to this</p>   <script src="//gist-it.appspot.com/github/khurram-aziz/HelloDocker/blob/master/Redis/Redis/Startup.cs"></script>    <ul>     <li><img width="695" height="839" title="redisclient-dotnet" align="right" style="border-left-width:0px;border-right-width:0px;background-image:none;border-bottom-width:0px;float:right;padding-top:0px;padding-left:0px;margin:10px 10px 0px 0px;display:inline;padding-right:0px;border-top-width:0px;" alt="redisclient-dotnet" src="/images/d87747e4e48d_1132D/redisclient-dotnet.png" border="0">As per StackExchange.Redis recommendation; we can reuse the ConnectionMultiplexer instance; therefore its defined as the static variables </li>        <li>Its initialized in the static constructor with ConfigurationOptions through which we defined the Redis Server and its password information </li>        <li>In the ConfigureService(IServiceCollection); the Redis Caching Extensions is added; and Redis Servir and password information is again specified while adding it </li>        <li>The Session service is also added in the ConfigureService according to its requirements </li>        <li>In the Configure(IApplicationBuilder, IHostingEnvironment, ILoggerFactory) method that gets called by the .NET Core runtimes for HTTP request pipeline; we are attaching the StaticFiles and Session extensions as per ASP.NET Core’s app.Use* conventions </li>   </ul>      <p>We are using Redis in the code above in our ASP.NET Core application for two purposes; unique visitor counter and page hit counter. Page Hit Counter is the simple <a href="https://redis.io/commands/incr" target="_blank">INCR</a> Redis command. For Unique visitor we are using Cookie and a Sets support of Redis; <a title="https://redis.io/commands/sadd" href="https://redis.io/commands/sadd">SADD</a> for adding the visitor and <a title="https://redis.io/commands/scard" href="https://redis.io/commands/scard">SCARD</a> to determine the length of the set. StackExchange.Redis APIs are StringIncrement, SetAdd and SetLength respectively. Using Sets; we dont have to worry about duplicates as Redis automatically takes care of it and we can continue to add into the set with same id and it will not allow duplicates.</p>      <ul>     <li>Give <b>dotnet build</b> to build and <b>dotnet run</b> to run the ASP.NET Core application</li>        <li>The code for Python and Dotnet Core Clients is available at <a title="https://github.com/khurram-aziz/HelloDocker/tree/master/Redis" href="https://github.com/khurram-aziz/HelloDocker/tree/master/Redis" target="_blank">https://github.com/khurram-aziz/HelloDocker/tree/master/Redis</a> </li>   </ul>


        

      </div>
    </div>
  </div>

  <hr>

  <!-- Footer -->
  <footer>
  <div class="container">
    <div class="row">
      <div class="col-md-12 text-center">
        <p class="copyright">Copyright &#xA9; 2024</p>

        <ul class="list-inline text-center small">
            <li class="list-inline-item">
              <a href="/feed.rss"><i class="fa fa-rss"></i> RSS Feed</a>
            </li>
            <li class="list-inline-item">
              <a href="/feed.atom"><i class="fa fa-rss"></i> Atom Feed</a>
            </li>
        </ul>
        <br />
        <div class="font-weight-bold small"><a href="https://statiq.dev">Generated by Statiq</a></div>
      </div>
    </div>
  </div>
</footer>


  <!-- Scripts -->
  <script src='/vendor/bootstrap/js/bootstrap.bundle.min.js'></script>
  <script src='/vendor/startbootstrap-clean-blog/js/scripts.js'></script>
  <script src='/js/clean-blog.js'></script>
  

  

</body>

</html>
