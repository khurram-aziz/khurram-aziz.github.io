<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>Khurram Aziz - Firmata</title>

  <link rel="canonical" href='/posts/firmata'>

      <link type="application/rss+xml" rel="alternate" title="Khurram Aziz" href="/feed.rss" />
      <link type="application/atom+xml" rel="alternate" title="Khurram Aziz" href="/feed.atom" />

  <meta name="application-name" content='Khurram Aziz' />
  <meta name="msapplication-tooltip" content='Khurram Aziz' />
  <meta name="msapplication-starturl" content='/' />

  <meta property="og:title" content='Khurram Aziz - Firmata' />
  <meta property="og:type" content="website" />
  <meta property="og:url" content='/posts/firmata' />

  <link rel="icon" href='/favicon.ico'>

  <!-- Custom fonts for this template -->
  <link href='/vendor/fontawesome-free/css/all.min.css' rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" data-no-mirror>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" data-no-mirror>

  <!-- Styles for this template (also includes Bootstrap) -->
  <link href='/scss/clean-blog.css' rel="stylesheet">

  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js" data-no-mirror></script>
  <script src="https://cdn.jsdelivr.net/npm/quicklink@2.3.0/dist/quicklink.umd.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism.css" rel="stylesheet">

  


  

</head>

<body>

  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href='/'>Khurram Aziz</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      Menu
      <i class="fas fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ms-auto">
          <li class="nav-item">
    <a class="nav-link" href="/pages/about">About</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/pages/series">Series</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/posts">Posts</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tags">Tags</a>
  </li>

      </ul>
    </div>
  </div>
</nav>


  <!-- Page Header -->
  <header class="masthead no-image">
  <div class="container position-relative">
    <div class="row">
      <div class="col-md-12">
        <div class='post-heading'>
          <h1>
            Firmata
          </h1>
            <div class="meta">Published on Wednesday, February 1, 2017</div>
              <div class="mt-3">
                  <a href="/tags/arduino" class="badge text-bg-light"> Arduino</a>
                  <a href="/tags/esp8266" class="badge text-bg-light"> ESP8266</a>
                  <a href="/tags/iot" class="badge text-bg-light"> IoT</a>
                  <a href="/tags/node" class="badge text-bg-light"> Node</a>
                  <a href="/tags/python" class="badge text-bg-light"> Python</a>
                  <a href="/tags/raspberry-pi" class="badge text-bg-light"> Raspberry Pi</a>
              </div>
        </div>
      </div>
    </div>
  </div>
</header>


  <!-- Main Content -->
  <div class="container">
    <div class="row">
      <div id="content" class="col-md-12">
        <p><b>ESP8266 Series</b></p>
<ul>
  <li><a title="Blink" href="/posts/blink.html">Blink</a></li>
  <li><a title="Arduino core for ESP8266 WiFi chip" href="/posts/arduino-core-ESP8266.html">Arduino core for ESP8266 WiFi chip</a></li>
  <li><a title="Sonoff Dissection" href="/posts/sonoff-dissection.html">Sonoff Dissection</a></li>
  <li><a title="MQ Telemetry Transport" href="/posts/mqtt.html">MQ Telemetry Transport</a></li>
  <li><a title="Firmata" href="/posts/firmata.html">Firmata</a></li>
  <li><a title="Johnny-Five" href="/posts/johnny-five.html">Johnny-Five</a></li>
</ul>
<p>Microcontrollers are great; but in today’s ever changing and more demanding world; we often need an ability to upgrade the software; fixing bugs if any; adding and enhancing the functionality. There are well established mechanisms for upgrading software on computers (PCs, Tablets and Phones); but updating firmware on Microcontrollers can become challenging. The connected smart appliances with larger memories can be updated with Over The Air (OTA) updates; but it needs resources like connectivity, enough memory/storage and developing + testing appropriate update mechanism in the firmware; that are not often available in all the appliances. In addition to this; our IoT software might be either complex or depends on other resources like cloud connectivity, database or accessing files that cant be done directly “on” the microcontroller. Further the solution might comprise of many appliances and there is need to coordinate across the appliances, taking input from one appliance doing something on other. <a href="/posts/mqtt.html" target="_blank">MQTT</a> can be used for data passing but sometimes we need an ability to treat the appliance as a “dump gadget” connected to a “smarter software” running on a computer. This is where firmata comes in; its a protocol for communicating with microcontrollers from software on a computer. The protocol is implemented in firmware on microcontroller; Arduino and Spark.IO are supported officially and there exists client libraries for different languages and platforms, from Python, Perl and Ruby to Java, .NET and Javascript/Node and many other (including mobile/tablet platforms)</p>      <p>Firmata Llbrary for Arduino comes preinstalled in the IDE and we can use it with supported boards, Arduino or ESP8266.</p>      <p><img width="589" height="525" title="firmata-sketch" style="border-left-width:0px;border-right-width:0px;background-image:none;border-bottom-width:0px;padding-top:0px;padding-left:0px;margin:10px 10px 0px 0px;display:inline;padding-right:0px;border-top-width:0px;" alt="firmata-sketch" src="/images/Firmata_C95A/firmata-sketch.jpg" border="0"></p>      <ul>     <li>For Arduino; we use StandardFirmata and for ESP8266 we use StandardFirmataWifi </li>   </ul>      <p>For the “Blink” example; I am showing you Python and Node.js examples; we can program in any language / platform and can find required library</p>      <p><img width="543" height="560" title="firmata-python" style="border-left-width:0px;border-right-width:0px;background-image:none;border-bottom-width:0px;padding-top:0px;padding-left:0px;margin:10px 10px 0px 0px;display:inline;padding-right:0px;border-top-width:0px;" alt="firmata-python" src="/images/Firmata_C95A/firmata-python.jpg" border="0"></p>      <ul>     <li>For Python; I am using <a href="https://github.com/tino/pyFirmata" target="_blank">pyfirmata</a> </li>   </ul>      <p><img width="515" height="558" title="firmata-nodejs" style="border-left-width:0px;border-right-width:0px;background-image:none;border-bottom-width:0px;padding-top:0px;padding-left:0px;margin:10px 10px 0px 0px;display:inline;padding-right:0px;border-top-width:0px;" alt="firmata-nodejs" src="/images/Firmata_C95A/firmata-nodejs.jpg" border="0"></p>      <ul>     <li>For the Node.js; I am using <a href="https://www.npmjs.com/package/firmata" target="_blank">firmata</a> </li>   </ul>      <p>If you are wondering; the code is not compiled and sent to microcontroller; instead microcontroller after firmata firmware is acting as a slave always listening to what’s being sent over the wire in the firmata protocol; you can watch the RX activity clearly on the Arduino board</p>      <p><a href="/images/Firmata_C95A/firmata-rx-activity.gif"><img width="600" height="338" title="firmata-rx-activity" style="border-left-width:0px;border-right-width:0px;background-image:none;border-bottom-width:0px;padding-top:0px;padding-left:0px;margin:10px 10px 0px 0px;display:inline;padding-right:0px;border-top-width:0px;" alt="firmata-rx-activity" src="/images/Firmata_C95A/firmata-rx-activity_thumb.gif" border="0"></a></p>      <p>In case of Arduino, the clear drawback is that we need serial connectivity between the board and the computer running the program. We can either use Ethernet or Wifi shield or ESP8266 where this serial cable connection is avoided and the program can connect to the microcontroller through Wifi. Simply use StandardFirmataWifi; edit the WifiConfig.h according to your Wifi settings, optionally uncomment SERIAL_DEBUG to view the debug logs in the Serial Monitor and you are good to go</p>      <p><img width="905" height="553" title="firmata-esp8266" style="border-left-width:0px;border-right-width:0px;background-image:none;border-bottom-width:0px;padding-top:0px;padding-left:0px;margin:10px 10px 0px 0px;display:inline;padding-right:0px;border-top-width:0px;" alt="firmata-esp8266" src="/images/Firmata_C95A/firmata-esp8266.jpg" border="0"></p>    <p>I connected an Analog Temperature Sensor to Analog Pin 0 and wrote this little Node.js program that retrieve the temperature value and send it to ThingsSpeak for further analysis / reporting.</p>      <script src="http://gist-it.appspot.com/github/khurram-aziz/HelloArduino/blob/master/firmata-temperature.js"></script>    <p>I find this firmata approach intuitive and easier; given we can change / manage the program easily on the computer instead of reflashing microcontroller firmware, especially ESP8266 based IoT appliances works great in this way. The appliance can continue to be installed where it is; say <a href="/posts/sonoff-dissection.html" target="_blank">Sonoff</a> switch and you can change / update the program on the computer possibly even remotely; say Raspberry Pi by sushing it</p>      <ul>     <li>Code is available at <a title="https://github.com/khurram-aziz/HelloArduino" href="https://github.com/khurram-aziz/HelloArduino" target="_blank">https://github.com/khurram-aziz/HelloArduino</a></li>   </ul>    <p>ESP8266 comes in all sizes; check this video for inspiration; we can deploy sensors connected to <a href="https://www.hackster.io/esp/products/esp8266-esp-01" target="_blank">ESP01</a> (that has two GPIOs) and solder/glue/pack the things to normal wall socket USB chargers (with required voltage regulation)</p>    <img alt="ESP8266 ESP-01" src="https://hackster.imgix.net/uploads/image/file/51067/esp01.jpg?auto=compress%2Cformat&amp;w=400&amp;h=300&amp;fit=max">    <iframe width="560" height="315" src="https://www.youtube.com/embed/BVsAIN9Jjtk" frameborder="0"></iframe>


        

      </div>
    </div>
  </div>

  <hr>

  <!-- Footer -->
  <footer>
  <div class="container">
    <div class="row">
      <div class="col-md-12 text-center">
        <p class="copyright">Copyright &#xA9; 2024</p>

        <ul class="list-inline text-center small">
            <li class="list-inline-item">
              <a href="/feed.rss"><i class="fa fa-rss"></i> RSS Feed</a>
            </li>
            <li class="list-inline-item">
              <a href="/feed.atom"><i class="fa fa-rss"></i> Atom Feed</a>
            </li>
        </ul>
        <br />
        <div class="font-weight-bold small"><a href="https://statiq.dev">Generated by Statiq</a></div>
      </div>
    </div>
  </div>
</footer>


  <!-- Scripts -->
  <script src='/vendor/bootstrap/js/bootstrap.bundle.min.js'></script>
  <script src='/vendor/startbootstrap-clean-blog/js/scripts.js'></script>
  <script src='/js/clean-blog.js'></script>
  

  

</body>

</html>
